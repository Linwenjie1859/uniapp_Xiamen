(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/my_order/my_order"],{"14d7":function(t,e,n){"use strict";(function(t,a){function r(t){return s(t)||o(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function s(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(){return n.e("components/uni-load-more/uni-load-more").then(n.bind(null,"003c"))},d={components:{uniLoadMore:u},data:function(){return{currentLoadFlag:!0,newsList:[],tabIndex:0,scrollInto:"",tabBars:[{title:"全部"},{title:"待付款"},{title:"待发货"},{title:"待收货"},{title:"待评价"}]}},onLoad:function(e){this.initInfo(),console.log(t(e.index," at pages\\user\\my_order\\my_order.vue:112")),this.tabIndex=e.index,this.getOrderList(e.index)},methods:{initInfo:function(){var t=this;this.tabBars.forEach(function(e){t.newsList.push({data:[],refreshText:"",loadingStatus:"more",refreshStatus:"loading",currentPage:1,pageSize:6,loadingFlag:!1,refreshFlag:!0,nodata:!1})})},loadMore:function(){var t=this;t.currentLoadFlag&&(t.currentLoadFlag=!1,t.newsList[t.tabIndex].loadingStatus="loading",t.newsList[t.tabIndex].loadingFlag=!0,setTimeout(function(){t.getOrderList(t.tabIndex)},400)),setTimeout(function(){t.currentLoadFlag=!0},500)},onPullDownRefresh:function(){this.newsList[this.tabIndex].data=[],this.newsList[this.tabIndex].currentPage=1,this.newsList[this.tabIndex].loadingFlag=!1,this.newsList[this.tabIndex].nodata=!1,this.getOrderList(this.tabIndex)},ontabtap:function(t){var e=t.target.dataset.current||t.currentTarget.dataset.current;this.tabIndex=e},ontabchange:function(t){var e=t.target.current||t.detail.current;this.tabIndex=e,this.scrollInto=this.tabBars[e].id,0===this.newsList[e].data.length&&this.getOrderList(e)},closeLoadingFlag:function(){var t=this;setTimeout(function(){t.newsList[t.tabIndex].loadingFlag=!1},800)},getOrderList:function(e){var n=this;n.basePost(n.U({c:"user_api",a:"get_user_order_list"}),{type:0==e?"":1==e?0:2==e?1:3==e?2:3,page:n.newsList[e].currentPage,limit:n.newsList[e].pageSize,search:""},function(i){if(n.newsList[n.tabIndex].refreshFlag=!1,a.stopPullDownRefresh(),0==i.data.length&&0==n.newsList[e].data&&(n.newsList[e].nodata=!0),console.log(t(i.data.length," at pages\\user\\my_order\\my_order.vue:196")),0==i.data.length)return n.newsList[e].loadingStatus="noMore",void n.closeLoadingFlag();n.newsList[e].data=[].concat(r(n.newsList[e].data),r(i.data)),n.newsList[e].currentPage++,console.log(t("newsList:",n.newsList," at pages\\user\\my_order\\my_order.vue:204"))},function(e){console.log(t(e," at pages\\user\\my_order\\my_order.vue:207"))})},tabsChange:function(t){this.current=t},purchase:function(t,e){var n={order_id:this.newsList[t].data[e].order_id,total_price:this.newsList[t].data[e].total_price};a.navigateTo({url:"/pages/user/confirm_payment/confirm_payment?orderInfo="+JSON.stringify(n)})},closeOrder:function(e,n,r){var i=this;a.showModal({title:"提示",content:"确定删除这个订单？",success:function(a){a.confirm&&i.basePost(i.U({c:"user_api",a:"user_remove_order"}),{uni:e},function(t){i.newsList[n].data.splice(r,1)},function(e){console.log(t(e," at pages\\user\\my_order\\my_order.vue:242"))})}})},confirmGood:function(e,n,a){var r=this;r.basePost(r.U({c:"user_api",a:"user_take_order"}),{uni:e},function(t){r.Tips({title:"确认成功,立即前往评价~"}),r.newsList[n].data.splice(a,1)},function(e){console.log(t(e," at pages\\user\\my_order\\my_order.vue:264"))})},details:function(t){a.navigateTo({url:"/pages/user/order_details/order_details?order_id="+t})},evaluation:function(t,e){for(var n=[],r=this.newsList[t].data[e].cartInfo,i=0;i<r.length;i++){var o={unique:r[i].unique,image:r[i].productInfo.image};n.push(o)}a.navigateTo({url:"/pages/user/my_evaluation/my_evaluation?listUnique="+JSON.stringify(n)})},logistics:function(t){a.navigateTo({url:"/pages/shop/shop_logistics/shop_logistics?order_id="+t})}}};e.default=d}).call(this,n("0de9")["default"],n("6e42")["default"])},3467:function(t,e,n){"use strict";n.r(e);var a=n("914c"),r=n("68aa");for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);n("aa7e");var o=n("2877"),s=Object(o["a"])(r["default"],a["a"],a["b"],!1,null,null,null);e["default"]=s.exports},"68aa":function(t,e,n){"use strict";n.r(e);var a=n("14d7"),r=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=r.a},"914c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r})},aa7e:function(t,e,n){"use strict";var a=n("d6bb"),r=n.n(a);r.a},d6bb:function(t,e,n){},e788:function(t,e,n){"use strict";(function(t){n("4303"),n("921b");a(n("66fd"));var e=a(n("3467"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["e788","common/runtime","common/vendor"]]]);